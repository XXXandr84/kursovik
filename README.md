### Подготовка
1) На один уровень выше расположить дистрибутив графаны: grafana_10.4.0_amd64.deb. Его можно скачать по ссылке https://disk.yandex.ru/d/iwBXPvSnDhE4Mg
Это из-за того что графану нельзя скачать из-за санкций и в тоже время если положить в репозиторий, то идет превыгение 100Мб
2) В ~/.ssh/config чтобы находились ключи id_ed25519.pub и id_ed25519 
3) Необходим аккаунт в docker hub, yandex cloud.  
4) Т.к. развертывание занимает долго по времени, то можно посмотреть видео по ссылке: 

Запуск
1) Запустить  в корне репозитория create.sh и по окончании развертывания машин запустить 
запуск манифестов manifest.sh (файл после отработки тераформа создается динамически).
2) после окончания проверки запустить destroy.sh для быстрого удаления серверов на yandex cloud
3) После развертывания можно зайти по следующим ссылкам:
http://IP_k8s0:32092 сама программа
http://IP_k8s3 гитлаб. Для первого входа пароль отобразится в косоли. Сам проект с программой
 уже добавлен в домашний каталог пользователя. Проект нужно запускать вручную.
http://IP_k8s4 моинторинг (prometheus+grafana). В prometheus уже добавлен хост с программой. 
В графану (admin/admin) нужно вручную добавить prometheus.

### Описание того, что происходит в скриптах

create.sh:  
1) Запускается терраформ. Создает 6 хостов. Создается динамически файл inventory.ini, manifest.sh и в конце запускается главный плейбук в ансибл.  
2) Запускается ансибл и разворачивает роли по файлу inventory.ini.  

manifest.sh:  
1) Подключается к главному хосту и запускает скрипт по запуску манифестов, служб и т.д.
Запускаются и деплоятся все службы для программы поиска. Rabbit, fluetd.

destroy.sh
1) Идет подключение к терраформу и удаляет проект.


### Что было сделано

1) Скачаны приложения crawler и ui, изучен запуск руками  
2) Написан Dockerfile для этих приложений  
3) Написан docker-compose  
4) Созданы файлы и модули для terraform  
5) Созданы файлы для ansible  
6) Написаны bash-скрипты для автоматизации настройки и развертывания 
7) Написана документация  
8) Опубликован репозиторий

### Сложности с которыми столкнулся
1) Из-за санкий сложности в развертывании (Нельзя скачать Grafana, перестал работать helm).
2) Kubernstes почистил репозитории. Пришлось переписывать скрипт по скачиванию kuber с новых репозиториев.
3) Ограничения в git (больше 100Мб нельза хранить).